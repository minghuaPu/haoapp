<!DOCTYPE html>
<html ng-app="resume">

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width">
		<title>我的简历</title>
		<link rel="stylesheet" href="../../lib/ionic/css/ionic.min.css">
		<script src="../../lib/ionic/js/ionic.bundle.min.js"></script>
		<style>
			.bar .title+ .button {
				color: #00b38a;
			}
			
			.resume {
				padding: 15px;
				background-color: #efefef;
			}
			
			.resume .avatar-add {
				display: inline-block;
				cursor: pointer;
			}
			
			.resume .avatar-img {
				width: 80px;
				height: 80px;
				border-radius: 40px;
			}
			
			.resume aside {
				padding: 15px;
				background-color: #fff;
			}
			
			.resume aside div+div {
				padding-top: 15px;
			}
			
			.resume .edit {
				float: right;
				padding-left: 15px;
				color: #00b38a;
				cursor: pointer;
			}
			
			.resume .add {
				display: block;
				width: 100%;
				height: 80px;
				color: #00b38a;
				background-color: #e2edef;
				border: 1px dotted #00b38a;
			}
			
			.list .item span {
				display: inline-block;
				width: 35%;
			}
			
			.list .item input,
			.list .item select {
				font-size: 14px;
				color: #555;
				border: none;
				background-color: transparent;
				-webkit-appearance: none;
			}
			
			.list .item textarea {
				width: 100%;
				padding: 10px;
				color: #555;
				resize: none;
				background-color: #efefef;
			}
			
			.circle {
				padding-left: 15px;
				border-left: 1px solid #efefef;
			}
			
			.circle:before {
				float: left;
				display: inline-block;
				content: "";
				width: 1px;
				height: 16px;
				margin-left: -16px;
				background-color: #00b38a;
			}
		</style>
	</head>

	<body>
		<!-- 头部 -->
		<ion-header-bar>
			<button class="button button-clear icon-left ion-ios-arrow-left button-dark"></button>
			<h1 class="title">我的简历</h1>
			<button class="button button-clear">预览</button>
		</ion-header-bar>
		<!-- 简历 -->
		<ion-content>
			<section class="resume">
				<!-- 简历头像 -->
				<div class="padding-vertical">添加头像</div>
				<aside class="avatar text-center dark">
					<span class="avatar-add" ng-click="avatar()">
					<img class="avatar-img" src="../../img/jobseekers/u-avatar.png"><br>点击更换
				</span>
				</aside>
				<!-- 简历基本信息 -->
				<div class="padding-vertical">基本信息</div>
				<article ng-controller="resumeBasic">
					<aside class="dark" ng-show="basic">
						<div>姓 &nbsp; &nbsp; &nbsp; 名：
							<span ng-bind="basic[0].name"></span>
							<span class="edit" ng-click="edit()">编辑</span>
						</div>
						<div>性 &nbsp; &nbsp; &nbsp; 别：
							<span ng-bind="basic[0].sex"></span>
						</div>
						<div>最高学历：
							<span ng-bind="basic[0].degree"></span>
						</div>
						<div>工作年限：
							<span ng-bind="basic[0].working"></span>
						</div>
						<div>出生年份：
							<span ng-bind="basic[0].birth"></span>
						</div>
						<div>所在城市：
							<span ng-bind="basic[0].residence"></span>
						</div>
						<div>联系电话：
							<span ng-bind="basic[0].mobile"></span>
						</div>
						<div>联系邮箱：
							<span ng-bind="basic[0].email"></span>
						</div>
						<div>一句话描述：
							<span ng-bind="basic[0].intro"></span>
						</div>
					</aside>
					<button class="add" ng-click="add()" ng-hide="basic">+ 添加基本信息</button>
				</article>
				<!-- 基本信息模版 -->
				<script id="basic-modal.html" type="text/ng-template">
					<ion-modal-view>
						<ion-header-bar>
							<button class="button button-clear icon-left ion-ios-arrow-left button-dark" ng-click="modal.hide()"></button>
							<h1 class="title">基本信息</h1>
							<button class="button button-clear" ng-click="save()">保存</button>
						</ion-header-bar>
						<ion-content>
							<ul class="list padding-top">
								<li class="item">
									<span>姓 &nbsp; &nbsp; &nbsp; &nbsp;名</span>
									<input ng-model="b.name"></input>
								</li>
								<li class="item">
									<span>性 &nbsp; &nbsp; &nbsp; &nbsp;别</span>
									<select ng-model="b.sex">
										<option>男</option>
										<option>女</option>
									</select>
								</li>
								<li class="item">
									<span>最高学历</span>
									<select ng-model="b.degree">
										<option>大专</option>
										<option>本科</option>
										<option>硕士</option>
										<option>博士</option>
										<option>其它</option>
									</select>
								</li>
								<li class="item">
									<span>工作年限</span>
									<select ng-model="b.working">
										<option>应届毕业生</option>
										<option>1-3年</option>
										<option>3-5年</option>
										<option>5-10年</option>
										<option>10年以上</option>
									</select>
								</li>
								<li class="item">
									<span>出生年份</span>
									<select ng-model="b.birth">
										<option>00后</option>
										<option>90后</option>
										<option>80后</option>
										<option>其他</option>
									</select>
								</li>
								<li class="item">
									<span>所在城市</span>
									<select ng-model="b.residence">
										<option>北京</option>
										<option>上海</option>
										<option>广州</option>
										<option>深圳</option>
										<option>杭州</option>
										<option>其它</option>
									</select>
								</li>
								<li class="item">
									<span>联系电话</span>
									<input ng-model="b.mobile"></input>
								</li>
								<li class="item">
									<span>联系邮箱</span>
									<input ng-model="b.email"></input>
								</li>
								<li class="item">
									<span>一句话描述</span>
									<textarea ng-model="b.intro" rows="3"></textarea>
								</li>
							</ul>
						</ion-content>
					</ion-modal-view>
				</script>
				<!-- 简历工作经历 -->
				<div class="padding-vertical">工作经历</div>
				<article ng-controller="resumeJobexp">
					<aside ng-show="jobexp">
						<div class="circle" ng-repeat="j in jobexp">
							<div>
								<span ng-bind="j.working"></span>
								<span class="edit" ng-click="edit(j)">编辑</span>
								<span class="edit" ng-click="remove(j)">删除</span>
							</div>
							<div>
								<span ng-bind="j.company"></span> |
								<span ng-bind="j.position"></span>
							</div>
							<div>
								<span class="dark" ng-bind="j.content"></span>
							</div>
						</div>
					</aside>
					<button class="add" ng-click="add()" ng-hide="jobexp">+ 添加工作经历</button>
				</article>
				<!-- 工作经历模版 -->
				<script id="jobexp-modal.html" type="text/ng-template">
					<ion-modal-view>
						<ion-header-bar>
							<button class="button button-clear icon-left ion-ios-arrow-left button-dark" ng-click="modal.hide()"></button>
							<h1 class="title">工作经历</h1>
							<button class="button button-clear" ng-click="save()">保存</button>
						</ion-header-bar>
						<ion-content>
							<ul class="list padding-top">
								<li class="item">
									<span>公司</span>
									<input ng-model="j.company">
								</li>
								<li class="item">
									<span>职位</span>
									<input ng-model="j.position">
								</li>
								<li class="item">
									<span>任职时间</span>
									<input ng-model="j.working">
								</li>
								<li class="item">
									<span>工作内容</span>
									<input ng-model="j.content">
								</li>
							</ul>
						</ion-content>
					</ion-modal-view>
				</script>
				<!-- 简历教育经历 -->
				<div class="padding-vertical">教育经历</div>
				<article ng-controller="resumeEduexp">
					<aside ng-show="eduexp">
						<div class="circle" ng-repeat="e in eduexp">
							<div>
								<span ng-bind="e.grad"></span>
								<span class="edit" ng-click="edit(e)">编辑</span>
								<span class="edit" ng-click="remove(e)">删除</span>
							</div>
							<div>
								<span ng-bind="e.school"></span>
							</div>
							<div class="dark">
								<span ng-bind="e.degree"></span> |
								<span ng-bind="e.major"></span>
							</div>
						</div>
					</aside>
					<button class="add" ng-click="add()" ng-hide="eduexp">+ 添加教育经历</button>
				</article>
				<!-- 教育经历模版 -->
				<script id="eduexp-modal.html" type="text/ng-template">
					<ion-modal-view>
						<ion-header-bar>
							<button class="button button-clear icon-left ion-ios-arrow-left button-dark" ng-click="modal.hide()"></button>
							<h1 class="title">教育经历</h1>
							<button class="button button-clear" ng-click="save()">保存</button>
						</ion-header-bar>
						<ion-content>
							<ul class="list padding-top">
								<li class="item">
									<span>学校</span>
									<input ng-model="e.school">
								</li>
								<li class="item">
									<span>专业</span>
									<input ng-model="e.major">
								</li>
								<li class="item">
									<span>学历</span>
									<select ng-model="e.degree">
										<option>大专</option>
										<option>本科</option>
										<option>硕士</option>
										<option>博士</option>
										<option>其他</option>
									</select>
								</li>
								<li class="item">
									<span>毕业时间</span>
									<select ng-model="e.grad">
										<option>2017</option>
										<option>2016</option>
										<option>2015</option>
										<option>2014</option>
										<option>2013</option>
										<option>2012</option>
										<option>2011</option>
										<option>2010</option>
										<option>2009</option>
										<option>2008</option>
										<option>2007</option>
										<option>2006</option>
										<option>2005</option>
										<option>2004</option>
										<option>2003</option>
										<option>2002</option>
										<option>2001</option>
										<option>2000</option>
									</select>
								</li>
							</ul>
						</ion-content>
					</ion-modal-view>
				</script>
				<!-- 简历期望工作 -->
				<div class="padding-vertical">期望工作</div>
				<article ng-controller="resumeCareer">
					<aside ng-show="career">
						<div>
							<span ng-bind="career[0].position"></span>
							<span class="edit" ng-click="edit()">编辑</span>
						</div>
						<div>
							<span ng-bind="career[0].type"></span> |
							<span ng-bind="career[0].city"></span> |
							<span ng-bind="career[0].wages"></span>
						</div>
					</aside>
					<button class="add" ng-click="add()" ng-hide="career">+ 添加期望工作</button>
				</article>
				<!-- 期望工作模版 -->
				<script id="career-modal.html" type="text/ng-template">
					<ion-modal-view>
						<ion-header-bar>
							<button class="button button-clear icon-left ion-ios-arrow-left button-dark" ng-click="modal.hide()"></button>
							<h1 class="title">期望工作</h1>
							<button class="button button-clear" ng-click="save()">保存</button>
						</ion-header-bar>
						<ion-content>
							<ul class="list">
								<li class="item">
									<span>职位</span>
									<input ng-model="c.position">
								</li>
								<li class="item">
									<span>类型</span>
									<select ng-model="c.type">
										<option>无限</option>
										<option>全职</option>
										<option>兼职</option>
										<option>实习</option>
									</select>
								</li>
								<li class="item">
									<span>期望城市</span>
									<select ng-model="c.city">
										<option>无限</option>
										<option>北京</option>
										<option>上海</option>
										<option>广州</option>
										<option>深圳</option>
										<option>杭州</option>
									</select>
								</li>
								<li class="item">
									<span>期望薪水</span>
									<select ng-model="c.wages">
										<option>无限</option>
										<option>5k以下</option>
										<option>5k-10k</option>
										<option>10k-15k</option>
										<option>15k-20k</option>
										<option>20k-50k</option>
										<option>50k以上</option>
									</select>
								</li>
							</ul>
						</ion-content>
					</ion-modal-view>
				</script>
			</section>
		</ion-content>
		<script>
			angular.module('resume', ['ionic'])
				.run(function($rootScope, service) {
					$rootScope.avatar = function() {
						alert("上传头像")
					}
					service.load().then(function(response) {
						//测试数据
						$rootScope.basic = [{
							name: '林国胜',
							intro: '一句话',
							sex: '男',
							birth: '90后',
							degree: '大专',
							working: '应届毕业生',
							residence: '广州',
							mobile: '13226267239',
							email: '648253615@qq.com'
						}];
						$rootScope.jobexp = [{
							working: '2016',
							company: '源酷创意',
							position: 'Web前端',
							content: '工作内容'
						}, {
							working: '2017',
							company: '源酷创意1',
							position: 'Web前端1',
							content: '工作内容1'
						}];
						$rootScope.eduexp = [{
							grad: '2016',
							school: '源酷大学',
							degree: '大专',
							major: '软件技术'
						}, {
							grad: '2017',
							school: '源酷大学1',
							degree: '本科',
							major: '软件技术1'
						}];
						$rootScope.career = [{
							position: 'Web前端',
							type: '全职',
							city: '广州',
							wages: '5k-10k'
						}]
					})
				})
				//简历服务
				.factory('service', function($http) {
					return {
						//加载数据
						load: function() {
							return $http.get(location.href + '?a=select')
								.then(function(response) {
									return response['data']
								})
						},
						//保存数据
						save: function(index, data) {
							$http({
								method: 'get',
								url: location.href + '?a=save&index=' + index,
								params: data
							})
						},
						//删除数据
						remove: function(index, data) {
							$http({
								method: 'get',
								url: location.href + '?a=delete&index=' + index,
								params: data
							})
						}
					}
				})
				//简历基本信息
				.controller('resumeBasic', function($scope, service, $ionicModal) {
					$ionicModal.fromTemplateUrl('basic-modal.html', {
						scope: $scope
					}).then(function(modal) {
						$scope.modal = modal
					})
					$scope.edit = function() {
						$scope.modal.show();
						$scope.b = $scope.basic[0]
					}
					$scope.add = function() {
						$scope.modal.show();
						$scope.b = {
							name: '',
							intro: '',
							sex: '',
							birth: '',
							degree: '',
							working: '',
							residence: '',
							mobile: '',
							email: ''
						}
					}
					$scope.save = function() {
						service.save('basic', $scope.b)
					}
				})
				//简历工作经历
				.controller('resumeJobexp', function($scope, service, $ionicModal) {
					$ionicModal.fromTemplateUrl('jobexp-modal.html', {
						scope: $scope
					}).then(function(modal) {
						$scope.modal = modal
					})
					$scope.edit = function(jobexp) {
						$scope.modal.show();
						$scope.j = jobexp
					}
					$scope.add = function() {
						$scope.modal.show();
						$scope.j = {
							working: '',
							company: '',
							position: '',
							content: ''
						}
					}
					$scope.save = function() {
						service.save('jobexp', $scope.j)
					}
					$scope.remove = function(jobexp) {
						$scope.jobexp.splice($scope.jobexp.indexOf(jobexp), 1);
						service.remove('jobexp', jobexp)
					}
				})
				//简历教育经历
				.controller('resumeEduexp',
					function($scope, service, $ionicModal) {
						$ionicModal.fromTemplateUrl('eduexp-modal.html', {
							scope: $scope
						}).then(function(modal) {
							$scope.modal = modal
						})
						$scope.edit = function(eduexp) {
							$scope.modal.show();
							$scope.e = eduexp
						}
						$scope.add = function() {
							$scope.modal.show();
							$scope.e = {
								grad: '',
								school: '',
								degree: '',
								major: ''
							}
						}
						$scope.save = function() {
							service.save('eduexp', $scope.e)
						}
						$scope.remove = function(eduexp) {
							$scope.eduexp.splice($scope.eduexp.indexOf(eduexp), 1);
							service.remove('eduexp', eduexp)
						}
					})
				//简历期望工作
				.controller('resumeCareer', function($scope, service, $ionicModal) {
					$ionicModal.fromTemplateUrl('career-modal.html', {
						scope: $scope
					}).then(function(modal) {
						$scope.modal = modal
					})
					$scope.edit = function() {
						$scope.modal.show();
						$scope.c = $scope.career[0]
					}
					$scope.add = function() {
						$scope.modal.show();
						$scope.c = {
							position: '',
							type: '',
							city: '',
							wages: ''
						}
					}
					$scope.save = function() {
						service.save('career', $scope.c)
					}
				})
		</script>
	</body>

</html>